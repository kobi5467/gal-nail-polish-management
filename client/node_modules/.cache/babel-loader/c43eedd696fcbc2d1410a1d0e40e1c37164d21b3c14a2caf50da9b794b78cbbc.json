{"ast":null,"code":"import _regeneratorRuntime from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Grid,Typography,CircularProgress,Button}from\"@mui/material\";import backgroundImage from\"../../assets/images/background.jpeg\";import{useSnackbar}from\"notistack\";import{primaryColor,secondaryColor}from\"../../constants/colors\";import{useNavigate,useLocation}from\"react-router-dom\";import{signIn}from\"../../controllers/auth_controller\";import MyTextField from\"../../components/my_text_field\";import{useUserContext}from\"../../components/contexts/user_context_provider\";import{homeRoute,signupRoute}from\"../../constants/routes\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignInScreen=function SignInScreen(){var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useUserContext=useUserContext(),setToken=_useUserContext.setToken;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),submitting=_useState2[0],setSubmitting=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var navigate=useNavigate();useEffect(function(){var localToken=localStorage.getItem(\"token\");if(localToken!=null){navigate(homeRoute);return;}},[]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var isValidEmail,isValidPassword,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isValidEmail=email.trim().length;isValidPassword=password.trim().length;setSubmitting(true);if(!(isValidEmail&&isValidPassword)){_context.next=10;break;}_context.next=6;return signIn(email,password);case 6:response=_context.sent;if(response.status==\"NOT_OK\"){enqueueSnackbar(response.errorMessage,{variant:\"error\"});}else{enqueueSnackbar(\"Successfull Sign-In\",{variant:\"success\"});setToken(response.data.token);localStorage.setItem(\"token\",response.data.token);navigate(homeRoute);}setSubmitting(false);return _context.abrupt(\"return\");case 10:enqueueSnackbar(\"Please fill all fields\",{variant:\"warning\"});setSubmitting(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();function navigateToSignUp(){navigate(signupRoute);}return/*#__PURE__*/_jsx(Grid,{container:true,style:{height:\"100vh\",justifyContent:\"center\",alignItems:\"center\",background:\"url(\".concat(backgroundImage,\")\"),backgroundRepeat:\"no-repeat\",backgroundSize:\"cover\"},children:/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:11,md:7,lg:4,style:{backgroundColor:primaryColor,borderRadius:12,padding:35},boxShadow:20,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h4\",style:{color:\"white\",fontWeight:\"bold\"},children:\"Sign In\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextField,{label:\"Email\",placeholder:\"Type your email\",onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextField,{label:\"Password\",placeholder:\"Type your password\",type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,onClick:handleSubmit,style:{color:\"white\",fontSize:20,fontWeight:\"bold\",backgroundColor:secondaryColor,borderRadius:12,border:\"3px solid white\"},children:submitting?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"}):\"Submit\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",textAlign:\"center\",style:{color:\"white\",fontWeight:\"bold\"},children:\"Not yet registered? Join Us\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"outlined\",fullWidth:true,onClick:navigateToSignUp,style:{color:secondaryColor,fontSize:20,fontWeight:\"bold\",backgroundColor:\"white\",borderRadius:12,border:\"3px solid \".concat(secondaryColor)},children:\"Sign Up\"})})]})});};export default SignInScreen;","map":{"version":3,"names":["React","useState","useEffect","Grid","Typography","CircularProgress","Button","backgroundImage","useSnackbar","primaryColor","secondaryColor","useNavigate","useLocation","signIn","MyTextField","useUserContext","homeRoute","signupRoute","SignInScreen","enqueueSnackbar","setToken","submitting","setSubmitting","email","setEmail","password","setPassword","navigate","localToken","localStorage","getItem","handleSubmit","e","isValidEmail","trim","length","isValidPassword","response","status","errorMessage","variant","data","token","setItem","navigateToSignUp","height","justifyContent","alignItems","background","backgroundRepeat","backgroundSize","backgroundColor","borderRadius","padding","color","fontWeight","target","value","fontSize","border"],"sources":["/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/src/screens/auth/sign_in_screen.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport { Grid, Typography, CircularProgress, Button } from \"@mui/material\";\nimport backgroundImage from \"../../assets/images/background.jpeg\";\nimport { useSnackbar } from \"notistack\";\nimport { primaryColor, secondaryColor } from \"../../constants/colors\";\n\nimport { useNavigate, useLocation } from \"react-router-dom\";\nimport { signIn } from \"../../controllers/auth_controller\";\nimport MyTextField from \"../../components/my_text_field\";\nimport { useUserContext } from \"../../components/contexts/user_context_provider\";\nimport { homeRoute, signupRoute } from \"../../constants/routes\";\n\nconst SignInScreen = () => {\n  const { enqueueSnackbar } = useSnackbar();\n  const { setToken } = useUserContext();\n  const [submitting, setSubmitting] = useState(false);\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    var localToken = localStorage.getItem(\"token\");\n    if (localToken != null) {\n      navigate(homeRoute);\n      return;\n    }\n  }, []);\n\n  const handleSubmit = async (e) => {\n    var isValidEmail = email.trim().length;\n    var isValidPassword = password.trim().length;\n\n    setSubmitting(true);\n\n    if (isValidEmail && isValidPassword) {\n      // valid\n      var response = await signIn(email, password);\n      if (response.status == \"NOT_OK\") {\n        enqueueSnackbar(response.errorMessage, { variant: \"error\" });\n      } else {\n        enqueueSnackbar(\"Successfull Sign-In\", { variant: \"success\" });\n        setToken(response.data.token);\n        localStorage.setItem(\"token\", response.data.token);\n        navigate(homeRoute);\n      }\n\n      setSubmitting(false);\n      return;\n    }\n\n    enqueueSnackbar(\"Please fill all fields\", { variant: \"warning\" });\n    setSubmitting(false);\n  };\n\n  function navigateToSignUp() {\n    navigate(signupRoute);\n  }\n\n  return (\n    <Grid\n      container\n      style={{\n        height: \"100vh\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        background: `url(${backgroundImage})`,\n        backgroundRepeat: \"no-repeat\",\n        backgroundSize: \"cover\",\n      }}\n    >\n      <Grid\n        item\n        container\n        xs={11}\n        md={7}\n        lg={4}\n        style={{ backgroundColor: primaryColor, borderRadius: 12, padding: 35 }}\n        boxShadow={20}\n      >\n        <Grid item xs={12}>\n          <Typography variant=\"h4\" style={{ color: \"white\", fontWeight: \"bold\" }}>\n            Sign In\n          </Typography>\n        </Grid>\n        <Grid item xs={12} style={{ height: \"20px\" }} />\n        <Grid item xs={12}>\n          <MyTextField\n            label=\"Email\"\n            placeholder=\"Type your email\"\n            onChange={(e) => setEmail(e.target.value)}\n          />\n        </Grid>\n        <Grid item xs={12} style={{ height: \"20px\" }} />\n        <Grid item xs={12}>\n          <MyTextField\n            label=\"Password\"\n            placeholder=\"Type your password\"\n            type=\"password\"\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </Grid>\n        <Grid item xs={12} style={{ height: \"20px\" }} />\n\n        <Grid item xs={12}>\n          <Button\n            type=\"submit\"\n            variant=\"contained\"\n            fullWidth\n            onClick={handleSubmit}\n            style={{\n              color: \"white\",\n              fontSize: 20,\n              fontWeight: \"bold\",\n              backgroundColor: secondaryColor,\n              borderRadius: 12,\n              border: \"3px solid white\",\n            }}\n          >\n            {submitting ? <CircularProgress color=\"inherit\" /> : \"Submit\"}\n          </Button>\n        </Grid>\n        <Grid item xs={12} style={{ height: \"20px\" }} />\n        <Grid item xs={12}>\n          <Typography variant=\"h6\" textAlign={\"center\"} style={{ color: \"white\", fontWeight: \"bold\" }}>\n            Not yet registered? Join Us\n          </Typography>\n        </Grid>\n        <Grid item xs={12} style={{ height: \"20px\" }} />\n        <Grid item xs={12}>\n          <Button\n            type=\"submit\"\n            variant=\"outlined\"\n            fullWidth\n            onClick={navigateToSignUp}\n            style={{\n              color: secondaryColor,\n              fontSize: 20,\n              fontWeight: \"bold\",\n              backgroundColor: \"white\",\n              borderRadius: 12,\n              border: `3px solid ${secondaryColor}`,\n            }}\n          >\n            Sign Up\n          </Button>\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default SignInScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}