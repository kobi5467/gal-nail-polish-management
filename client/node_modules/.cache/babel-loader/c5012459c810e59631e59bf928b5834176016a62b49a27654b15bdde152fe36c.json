{"ast":null,"code":"import _regeneratorRuntime from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{Grid,Typography,Button,CircularProgress}from\"@mui/material\";import{updateAppointment}from\"../../../../../controllers/appointments_controller\";import{secondaryColor}from\"../../../../../constants/colors\";import{useUserContext}from\"../../../../../components/contexts/user_context_provider\";import MyTimePicker from\"../../../../../components/my_time_picker\";import{useSnackbar}from\"notistack\";import MyTextFieldValue from\"../../../../../components/my_text_field_value\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateAppointmentForm=function UpdateAppointmentForm(_ref){var appointment=_ref.appointment,setReload=_ref.setReload,setIsAddForm=_ref.setIsAddForm;var _useUserContext=useUserContext(),token=_useUserContext.token;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitting=_useState8[0],setSubmitting=_useState8[1];useEffect(function(){if(appointment===null)return;setName(appointment.name);setPhone(appointment.phone);setTime(appointment.time);},[appointment]);var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var timeHM,updatedAppointment,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// add appointment here\nsetSubmitting(true);if(!(name===\"\"||phone===\"\"||time===\"\")){_context.next=5;break;}enqueueSnackbar(\"Please fill all fields\",{variant:\"error\"});setSubmitting(false);return _context.abrupt(\"return\");case 5:timeHM=\"\".concat(time.getHours(),\":\").concat(time.getMinutes());updatedAppointment={name:name,phone:phone,time:timeHM,date:appointment.date,id:appointment._id};_context.next=9;return updateAppointment(token,updatedAppointment);case 9:response=_context.sent;setSubmitting(false);setReload(function(val){return!val;});if(response.status===\"OK\"){enqueueSnackbar(\"Appointment updated successfully\",{variant:\"success\"});}else{enqueueSnackbar(response.errorMessage,{variant:\"error\"});}case 13:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Grid,{container:true,style:{backgroundColor:\"#ffffffcc\",borderRadius:5,padding:10},children:[/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:12,justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{color:secondaryColor,fontWeight:\"bold\"},children:\"Edit New Appointment\"})}),/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setIsAddForm(true);},variant:\"outlined\",style:{color:secondaryColor,backgroundColor:\"white\",border:\"1px solid \".concat(secondaryColor),fontWeight:\"bold\"},children:\"Add\"})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextFieldValue,{value:name,label:\"Name\",placeholder:\"Type customer name\",onChange:function onChange(e){return setName(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextFieldValue,{value:phone,label:\"Phone\",placeholder:\"Type customer phone\",onChange:function onChange(e){return setPhone(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTimePicker,{label:\"Time\",placeHolder:\"Choose appointment time\",value:time,setValue:function setValue(value){return setTime(value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,onClick:handleSubmit,style:{color:\"white\",fontSize:20,fontWeight:\"bold\",backgroundColor:secondaryColor,borderRadius:12,border:\"3px solid white\"},children:submitting?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"}):\"Submit\"})})]});};export default UpdateAppointmentForm;","map":{"version":3,"names":["React","useEffect","useState","Grid","Typography","Button","CircularProgress","updateAppointment","secondaryColor","useUserContext","MyTimePicker","useSnackbar","MyTextFieldValue","UpdateAppointmentForm","appointment","setReload","setIsAddForm","token","enqueueSnackbar","name","setName","phone","setPhone","time","setTime","submitting","setSubmitting","handleSubmit","variant","timeHM","getHours","getMinutes","updatedAppointment","date","id","_id","response","val","status","errorMessage","backgroundColor","borderRadius","padding","color","fontWeight","border","height","e","target","value","fontSize"],"sources":["/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/src/screens/dashboard/appointments/components/forms/update_appointment_form.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Grid, Typography, Button, CircularProgress } from \"@mui/material\";\nimport { updateAppointment } from \"../../../../../controllers/appointments_controller\";\nimport { secondaryColor } from \"../../../../../constants/colors\";\nimport { useUserContext } from \"../../../../../components/contexts/user_context_provider\";\nimport MyTimePicker from \"../../../../../components/my_time_picker\";\nimport { useSnackbar } from \"notistack\";\nimport MyTextFieldValue from \"../../../../../components/my_text_field_value\";\n\nconst UpdateAppointmentForm = ({ appointment, setReload, setIsAddForm }) => {\n  const { token } = useUserContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n\n  useEffect(() => {\n    if (appointment === null) return;\n\n    setName(appointment.name);\n    setPhone(appointment.phone);\n    setTime(appointment.time);\n  }, [appointment]);\n\n  const handleSubmit = async () => {\n    // add appointment here\n    setSubmitting(true);\n    if (name === \"\" || phone === \"\" || time === \"\") {\n      enqueueSnackbar(\"Please fill all fields\", { variant: \"error\" });\n      setSubmitting(false);\n      return;\n    }\n\n    var timeHM = `${time.getHours()}:${time.getMinutes()}`;\n    var updatedAppointment = {\n      name: name,\n      phone: phone,\n      time: timeHM,\n      date: appointment.date,\n      id: appointment._id,\n    };\n\n    var response = await updateAppointment(token, updatedAppointment);\n    setSubmitting(false);\n    setReload((val) => !val);\n    if (response.status === \"OK\") {\n      enqueueSnackbar(\"Appointment updated successfully\", { variant: \"success\" });\n    } else {\n      enqueueSnackbar(response.errorMessage, { variant: \"error\" });\n    }\n  };\n\n  return (\n    <Grid container style={{ backgroundColor: \"#ffffffcc\", borderRadius: 5, padding: 10 }}>\n      <Grid item container xs={12} justifyContent=\"space-between\">\n        <Grid item>\n          <Typography variant=\"h6\" style={{ color: secondaryColor, fontWeight: \"bold\" }}>\n            Edit New Appointment\n          </Typography>\n        </Grid>\n        <Grid item>\n          <Button\n            onClick={() => setIsAddForm(true)}\n            variant=\"outlined\"\n            style={{\n              color: secondaryColor,\n              backgroundColor: \"white\",\n              border: `1px solid ${secondaryColor}`,\n              fontWeight: \"bold\",\n            }}\n          >\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTextFieldValue\n          value={name}\n          label=\"Name\"\n          placeholder=\"Type customer name\"\n          onChange={(e) => setName(e.target.value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTextFieldValue\n          value={phone}\n          label=\"Phone\"\n          placeholder=\"Type customer phone\"\n          onChange={(e) => setPhone(e.target.value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTimePicker\n          label=\"Time\"\n          placeHolder=\"Choose appointment time\"\n          value={time}\n          setValue={(value) => setTime(value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          onClick={handleSubmit}\n          style={{\n            color: \"white\",\n            fontSize: 20,\n            fontWeight: \"bold\",\n            backgroundColor: secondaryColor,\n            borderRadius: 12,\n            border: \"3px solid white\",\n          }}\n        >\n          {submitting ? <CircularProgress color=\"inherit\" /> : \"Submit\"}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default UpdateAppointmentForm;\n"],"mappings":"kgBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,IAAI,CAAEC,UAAU,CAAEC,MAAM,CAAEC,gBAAgB,KAAQ,eAAe,CAC1E,OAASC,iBAAiB,KAAQ,oDAAoD,CACtF,OAASC,cAAc,KAAQ,iCAAiC,CAChE,OAASC,cAAc,KAAQ,0DAA0D,CACzF,MAAOC,aAAY,KAAM,0CAA0C,CACnE,OAASC,WAAW,KAAQ,WAAW,CACvC,MAAOC,iBAAgB,KAAM,+CAA+C,CAAC,wFAE7E,GAAMC,sBAAqB,CAAG,QAAxBA,sBAAqB,MAAiD,IAA3CC,YAAW,MAAXA,WAAW,CAAEC,SAAS,MAATA,SAAS,CAAEC,YAAY,MAAZA,YAAY,CACnE,oBAAkBP,cAAc,EAAE,CAA1BQ,KAAK,iBAALA,KAAK,CACb,iBAA4BN,WAAW,EAAE,CAAjCO,eAAe,cAAfA,eAAe,CAEvB,cAAwBhB,QAAQ,CAAC,EAAE,CAAC,wCAA7BiB,IAAI,eAAEC,OAAO,eACpB,eAA0BlB,QAAQ,CAAC,EAAE,CAAC,yCAA/BmB,KAAK,eAAEC,QAAQ,eACtB,eAAwBpB,QAAQ,CAAC,EAAE,CAAC,yCAA7BqB,IAAI,eAAEC,OAAO,eACpB,eAAoCtB,QAAQ,CAAC,KAAK,CAAC,yCAA5CuB,UAAU,eAAEC,aAAa,eAEhCzB,SAAS,CAAC,UAAM,CACd,GAAIa,WAAW,GAAK,IAAI,CAAE,OAE1BM,OAAO,CAACN,WAAW,CAACK,IAAI,CAAC,CACzBG,QAAQ,CAACR,WAAW,CAACO,KAAK,CAAC,CAC3BG,OAAO,CAACV,WAAW,CAACS,IAAI,CAAC,CAC3B,CAAC,CAAE,CAACT,WAAW,CAAC,CAAC,CAEjB,GAAMa,aAAY,6FAAG,4KACnB;AACAD,aAAa,CAAC,IAAI,CAAC,CAAC,KAChBP,IAAI,GAAK,EAAE,EAAIE,KAAK,GAAK,EAAE,EAAIE,IAAI,GAAK,EAAE,0BAC5CL,eAAe,CAAC,wBAAwB,CAAE,CAAEU,OAAO,CAAE,OAAQ,CAAC,CAAC,CAC/DF,aAAa,CAAC,KAAK,CAAC,CAAC,wCAInBG,MAAM,WAAMN,IAAI,CAACO,QAAQ,EAAE,aAAIP,IAAI,CAACQ,UAAU,EAAE,EAChDC,kBAAkB,CAAG,CACvBb,IAAI,CAAEA,IAAI,CACVE,KAAK,CAAEA,KAAK,CACZE,IAAI,CAAEM,MAAM,CACZI,IAAI,CAAEnB,WAAW,CAACmB,IAAI,CACtBC,EAAE,CAAEpB,WAAW,CAACqB,GAClB,CAAC,uBAEoB5B,kBAAiB,CAACU,KAAK,CAAEe,kBAAkB,CAAC,QAA7DI,QAAQ,eACZV,aAAa,CAAC,KAAK,CAAC,CACpBX,SAAS,CAAC,SAACsB,GAAG,QAAK,CAACA,GAAG,GAAC,CACxB,GAAID,QAAQ,CAACE,MAAM,GAAK,IAAI,CAAE,CAC5BpB,eAAe,CAAC,kCAAkC,CAAE,CAAEU,OAAO,CAAE,SAAU,CAAC,CAAC,CAC7E,CAAC,IAAM,CACLV,eAAe,CAACkB,QAAQ,CAACG,YAAY,CAAE,CAAEX,OAAO,CAAE,OAAQ,CAAC,CAAC,CAC9D,CAAC,uDACF,kBA1BKD,aAAY,2CA0BjB,CAED,mBACE,MAAC,IAAI,EAAC,SAAS,MAAC,KAAK,CAAE,CAAEa,eAAe,CAAE,WAAW,CAAEC,YAAY,CAAE,CAAC,CAAEC,OAAO,CAAE,EAAG,CAAE,wBACpF,MAAC,IAAI,EAAC,IAAI,MAAC,SAAS,MAAC,EAAE,CAAE,EAAG,CAAC,cAAc,CAAC,eAAe,wBACzD,KAAC,IAAI,EAAC,IAAI,4BACR,KAAC,UAAU,EAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAE,CAAEC,KAAK,CAAEnC,cAAc,CAAEoC,UAAU,CAAE,MAAO,CAAE,kCAEjE,EACR,cACP,KAAC,IAAI,EAAC,IAAI,4BACR,KAAC,MAAM,EACL,OAAO,CAAE,yBAAM5B,aAAY,CAAC,IAAI,CAAC,EAAC,CAClC,OAAO,CAAC,UAAU,CAClB,KAAK,CAAE,CACL2B,KAAK,CAAEnC,cAAc,CACrBgC,eAAe,CAAE,OAAO,CACxBK,MAAM,qBAAerC,cAAc,CAAE,CACrCoC,UAAU,CAAE,MACd,CAAE,iBAGK,EACJ,GACF,cACP,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,CAAC,KAAK,CAAE,CAAEE,MAAM,CAAE,MAAO,CAAE,EAAG,cAChD,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,uBAChB,KAAC,gBAAgB,EACf,KAAK,CAAE3B,IAAK,CACZ,KAAK,CAAC,MAAM,CACZ,WAAW,CAAC,oBAAoB,CAChC,QAAQ,CAAE,kBAAC4B,CAAC,QAAK3B,QAAO,CAAC2B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EACzC,EACG,cACP,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,CAAC,KAAK,CAAE,CAAEH,MAAM,CAAE,MAAO,CAAE,EAAG,cAChD,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,uBAChB,KAAC,gBAAgB,EACf,KAAK,CAAEzB,KAAM,CACb,KAAK,CAAC,OAAO,CACb,WAAW,CAAC,qBAAqB,CACjC,QAAQ,CAAE,kBAAC0B,CAAC,QAAKzB,SAAQ,CAACyB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,EAAC,EAC1C,EACG,cACP,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,CAAC,KAAK,CAAE,CAAEH,MAAM,CAAE,MAAO,CAAE,EAAG,cAChD,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,uBAChB,KAAC,YAAY,EACX,KAAK,CAAC,MAAM,CACZ,WAAW,CAAC,yBAAyB,CACrC,KAAK,CAAEvB,IAAK,CACZ,QAAQ,CAAE,kBAAC0B,KAAK,QAAKzB,QAAO,CAACyB,KAAK,CAAC,EAAC,EACpC,EACG,cACP,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,CAAC,KAAK,CAAE,CAAEH,MAAM,CAAE,MAAO,CAAE,EAAG,cAChD,KAAC,IAAI,EAAC,IAAI,MAAC,EAAE,CAAE,EAAG,uBAChB,KAAC,MAAM,EACL,IAAI,CAAC,QAAQ,CACb,OAAO,CAAC,WAAW,CACnB,SAAS,MACT,OAAO,CAAEnB,YAAa,CACtB,KAAK,CAAE,CACLgB,KAAK,CAAE,OAAO,CACdO,QAAQ,CAAE,EAAE,CACZN,UAAU,CAAE,MAAM,CAClBJ,eAAe,CAAEhC,cAAc,CAC/BiC,YAAY,CAAE,EAAE,CAChBI,MAAM,CAAE,iBACV,CAAE,UAEDpB,UAAU,cAAG,KAAC,gBAAgB,EAAC,KAAK,CAAC,SAAS,EAAG,CAAG,QAAQ,EACtD,EACJ,GACF,CAEX,CAAC,CAED,cAAeZ,sBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}