{"ast":null,"code":"import _regeneratorRuntime from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Grid,Typography,Button,CircularProgress}from\"@mui/material\";import{secondaryColor}from\"../../../../../constants/colors\";import{useUserContext}from\"../../../../../components/contexts/user_context_provider\";import MyTextField from\"../../../../../components/my_text_field\";import MyTimePicker from\"../../../../../components/my_time_picker\";import{useSnackbar}from\"notistack\";import{insertAppointment}from\"../../../../../controllers/appointments_controller\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AddAppointmentForm=function AddAppointmentForm(_ref){var setReload=_ref.setReload,selectedDate=_ref.selectedDate;var _useUserContext=useUserContext(),token=_useUserContext.token;var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),time=_useState6[0],setTime=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitting=_useState8[0],setSubmitting=_useState8[1];var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var timeHM,appointment,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// add appointment here\nsetSubmitting(true);if(!(name===\"\"||phone===\"\"||time===\"\")){_context.next=5;break;}enqueueSnackbar(\"Please fill all fields\",{variant:\"error\"});setSubmitting(false);return _context.abrupt(\"return\");case 5:timeHM=\"\".concat(time.getHours(),\":\").concat(time.getMinutes());appointment={name:name,phone:phone,time:timeHM,date:selectedDate};_context.next=9;return insertAppointment(token,appointment);case 9:response=_context.sent;resetForm();setSubmitting(false);setReload(function(val){return!val;});if(response.status===\"OK\"){enqueueSnackbar(\"Appointment added successfully\",{variant:\"success\"});}else{enqueueSnackbar(response.errorMessage,{variant:\"error\"});}case 14:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();var resetForm=function resetForm(){setName(\"\");setPhone(\"\");setTime(\"\");};return/*#__PURE__*/_jsxs(Grid,{container:true,style:{backgroundColor:\"#ffffffcc\",borderRadius:5,padding:10},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{color:secondaryColor,fontWeight:\"bold\"},children:\"Add New Appointment\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextField,{value:name,label:\"Name\",placeholder:\"Type customer name\",onChange:function onChange(e){return setName(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTextField,{label:\"Phone\",placeholder:\"Type customer phone\",onChange:function onChange(e){return setPhone(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(MyTimePicker,{label:\"Time\",placeHolder:\"Choose appointment time\",value:time,setValue:function setValue(value){return setTime(value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,style:{height:\"20px\"}}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",fullWidth:true,onClick:handleSubmit,style:{color:\"white\",fontSize:20,fontWeight:\"bold\",backgroundColor:secondaryColor,borderRadius:12,border:\"3px solid white\"},children:submitting?/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"}):\"Submit\"})})]});};export default AddAppointmentForm;","map":{"version":3,"names":["React","useState","Grid","Typography","Button","CircularProgress","secondaryColor","useUserContext","MyTextField","MyTimePicker","useSnackbar","insertAppointment","AddAppointmentForm","setReload","selectedDate","token","enqueueSnackbar","name","setName","phone","setPhone","time","setTime","submitting","setSubmitting","handleSubmit","variant","timeHM","getHours","getMinutes","appointment","date","response","resetForm","val","status","errorMessage","backgroundColor","borderRadius","padding","color","fontWeight","height","e","target","value","fontSize","border"],"sources":["/home/kobi/kobi_devs/web-project-moran/gel-nail-polish-management-project/client/src/screens/dashboard/appointments/components/forms/add_appointment_form.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Grid, Typography, Button, CircularProgress } from \"@mui/material\";\nimport { secondaryColor } from \"../../../../../constants/colors\";\nimport { useUserContext } from \"../../../../../components/contexts/user_context_provider\";\nimport MyTextField from \"../../../../../components/my_text_field\";\nimport MyTimePicker from \"../../../../../components/my_time_picker\";\nimport { useSnackbar } from \"notistack\";\nimport { insertAppointment } from \"../../../../../controllers/appointments_controller\";\n\nconst AddAppointmentForm = ({ setReload, selectedDate }) => {\n  const { token } = useUserContext();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const [name, setName] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n\n  const handleSubmit = async () => {\n    // add appointment here\n    setSubmitting(true);\n    if (name === \"\" || phone === \"\" || time === \"\") {\n      enqueueSnackbar(\"Please fill all fields\", { variant: \"error\" });\n      setSubmitting(false);\n      return;\n    }\n\n    var timeHM = `${time.getHours()}:${time.getMinutes()}`;\n    var appointment = {\n      name: name,\n      phone: phone,\n      time: timeHM,\n      date: selectedDate,\n    };\n    var response = await insertAppointment(token, appointment);\n    resetForm();\n    setSubmitting(false);\n    setReload((val) => !val);\n    if (response.status === \"OK\") {\n      enqueueSnackbar(\"Appointment added successfully\", { variant: \"success\" });\n    } else {\n      enqueueSnackbar(response.errorMessage, { variant: \"error\" });\n    }\n  };\n\n  const resetForm = () => {\n    setName(\"\");\n    setPhone(\"\");\n    setTime(\"\");\n  };\n\n  return (\n    <Grid container style={{ backgroundColor: \"#ffffffcc\", borderRadius: 5, padding: 10 }}>\n      <Grid item xs={12}>\n        <Typography variant=\"h6\" style={{ color: secondaryColor, fontWeight: \"bold\" }}>\n          Add New Appointment\n        </Typography>\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTextField\n          value={name}\n          label=\"Name\"\n          placeholder=\"Type customer name\"\n          onChange={(e) => setName(e.target.value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTextField\n          label=\"Phone\"\n          placeholder=\"Type customer phone\"\n          onChange={(e) => setPhone(e.target.value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <MyTimePicker\n          label=\"Time\"\n          placeHolder=\"Choose appointment time\"\n          value={time}\n          setValue={(value) => setTime(value)}\n        />\n      </Grid>\n      <Grid item xs={12} style={{ height: \"20px\" }} />\n      <Grid item xs={12}>\n        <Button\n          type=\"submit\"\n          variant=\"contained\"\n          fullWidth\n          onClick={handleSubmit}\n          style={{\n            color: \"white\",\n            fontSize: 20,\n            fontWeight: \"bold\",\n            backgroundColor: secondaryColor,\n            borderRadius: 12,\n            border: \"3px solid white\",\n          }}\n        >\n          {submitting ? <CircularProgress color=\"inherit\" /> : \"Submit\"}\n        </Button>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default AddAppointmentForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}